os:
  - linux
  - osx

language: node_js

sudo:
  - false

cache:
  directories:
    - node_modules

env:
  - NODE_VER="0.10"
  - NODE_VER="0.12"
  - NODE_VER="4"
  - NODE_VER="5"

notifications:
    slack: vile-team:7m87AOerZQ1inYwPxxh5kBJs

before_install:
  - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then brew install graphviz; fi
  - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then uname -a
  - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then brew update
  - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then brew install nvm
  - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then source $(brew --prefix nvm)/nvm.sh
  - nvm --version
  - nvm install $NODE_VER
  - nvm use --delete-prefix v$NODE_VER
  - node --version
  - npm --version

install:
  - npm install

git:
  depth: 1

branches:
  only:
    - master

script:
  - npm run test-ci-build
