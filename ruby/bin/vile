#!/usr/bin/env ruby

require "awesome_print" if ENV["debug"]
require_relative "../lib/vile/cli"
require_relative "../lib/vile/punish"
require "spinning_cursor"
require "colorize"

SpinningCursor.run do
  banner "vile.rb ".colorize(:light_black) +
         "info".colorize(:cyan) +
         "PUNISH".rjust(22)
  type :spinner
  delay 0.065
  message ""
  action do
    opts = Vile::CLI.parse
    no_args = opts.to_hash.reject { |k, h| h == [] || !h }.empty?

    puts opts if no_args

    unless opts["help"] || no_args
      Vile::Punish.exec opts do |line|
        puts line
      end
    end
  end
end
